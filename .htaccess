<IfModule mod_headers.c>
    Header always set Access-Control-Allow-Origin "*"
</IfModule>

<IfModule mod_rewrite.c>

    RewriteEngine On
    RewriteBase /herb/
    
    # rules for rbge
    RewriteRule ^iiif/([^/]*)$           iiif/$1/manifest [R=303]
    RewriteRule ^iiif/([^/]*)/manifest$  presentation_manifest.php?barcode=$1 [PT]
    RewriteRule ^iiif/collection/([^/]*)/(.*)$  presentation_collection.php?genus=$1&species=$2 [PT]
    RewriteRule ^iiif/([^/]*)/annotation$ presentation_manifest.php?barcode=$1 [PT]
    RewriteRule ^iiif/([^/]*)/info\.json  image_info.php?barcode=$1 [PT]
    # {scheme}://{server}{/prefix}/{identifier}/{region}/{size}/{rotation}/{quality}.{format}
    RewriteRule ^iiif/([^/]*)/([^/]*)/([^/]*)/([^/]*)/([^/]*)\.jpg image_proxy.php?barcode=$1&region=$2&size=$3&rotation=$4&quality=$5 [PT]

</IfModule>

